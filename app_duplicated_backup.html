<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Empathy</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="styles_new.css" />
    <link rel="stylesheet" href="styles_carta.css" />
    <!-- üìä Sistema de estad√≠sticas en tiempo real -->
    <script src="real-time-stats.js"></script>
    <style>
        /* Ocultar contenido hasta verificar autenticaci√≥n */
        body {
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        body.authenticated {
            opacity: 1;
        }
        /* Loading screen mientras se verifica */
        .auth-loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #f6e5f5, #e8f0ff);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            flex-direction: column;
        }
        .auth-loading h2 {
            color: #5d4e6d;
            margin-bottom: 20px;
            font-family: 'Quicksand', sans-serif;
        }
        .auth-spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(93, 78, 109, 0.3);
            border-left: 4px solid #5d4e6d;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
    <script>
        // BLOQUEO ABSOLUTO - Interceptar ANTES de que se cargue cualquier cosa
        (function() {
            // Bloquear INMEDIATAMENTE toda la p√°gina
            document.write('<div id="blockScreen" style="position:fixed;top:0;left:0;width:100%;height:100%;background:linear-gradient(135deg,#f6e5f5,#e8f0ff);z-index:999999;display:flex;align-items:center;justify-content:center;flex-direction:column;"><h2 style="color:#5d4e6d;font-family:Quicksand,sans-serif;">Verificando acceso...</h2><div style="width:40px;height:40px;border:4px solid rgba(93,78,109,0.3);border-left:4px solid #5d4e6d;border-radius:50%;animation:spin 1s linear infinite;"></div></div><style>@keyframes spin{to{transform:rotate(360deg);}}</style>');
            
            console.log('üõ°Ô∏è BLOQUEO ABSOLUTO - Verificando acceso...');
            
            // Funci√≥n para redireccionar INMEDIATAMENTE
            function forceRedirect() {
                console.log('‚ùå ACCESO DENEGADO - Redirigiendo AHORA...');
                window.stop(); // Detener carga de la p√°gina
                window.location.replace('index.html?logout=true');
            }
            
            // Verificaci√≥n INMEDIATA
            const sessionData = localStorage.getItem('empathy_session');
            
            if (!sessionData) {
                console.log('‚ùå No hay sesi√≥n - BLOQUEANDO...');
                forceRedirect();
                return;
            }

            try {
                const session = JSON.parse(sessionData);
                const now = new Date();
                const expiresAt = new Date(session.expiresAt);

                if (now > expiresAt) {
                    console.log('‚ùå Sesi√≥n expirada - BLOQUEANDO...');
                    localStorage.removeItem('empathy_session');
                    forceRedirect();
                    return;
                }
                
                // Verificar usuario
                const users = JSON.parse(localStorage.getItem('empathy_users') || '[]');
                const user = users.find(u => u.id === session.userId && u.isActive !== false);
                
                if (!user) {
                    console.log('‚ùå Usuario no v√°lido - BLOQUEANDO...');
                    localStorage.removeItem('empathy_session');
                    forceRedirect();
                    return;
                }
                
                console.log('‚úÖ Acceso autorizado para:', user.name);
                console.log('üîì Desbloqueando interfaz - agregando clase authenticated');
                // Autorizar acceso: agregar clase authenticated y remover bloqueo
                setTimeout(() => {
                    // Agregar clase authenticated al body para mostrar contenido
                    document.body.classList.add('authenticated');
                    console.log('‚úÖ Clase authenticated agregada al body');
                    
                    const block = document.getElementById('blockScreen');
                    if (block) {
                        console.log('üóëÔ∏è Removiendo pantalla de bloqueo');
                        block.style.opacity = '0';
                        setTimeout(() => block.remove(), 300);
                    }
                    
                    // Remover pantalla de carga tambi√©n
                    const authLoading = document.getElementById('authLoading');
                    if (authLoading) {
                        console.log('üóëÔ∏è Removiendo pantalla de carga');
                        authLoading.style.opacity = '0';
                        setTimeout(() => authLoading.remove(), 300);
                    }
                    
                    console.log('üéâ Interfaz completamente desbloqueada');
                }, 500);
                
            } catch (error) {
                console.log('‚ùå Error en verificaci√≥n - BLOQUEANDO...');
                localStorage.removeItem('empathy_session');
                forceRedirect();
                return;
            }
        })();
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/gsap.min.js"></script>
    <script src="auth-guard.js" defer></script>
    <script src="main.js" defer></script>
    <script src="carta-gsap-fixed.js" defer></script>
</head>

<body>
    <!-- Pantalla de verificaci√≥n de autenticaci√≥n -->
    <div class="auth-loading" id="authLoading">
        <h2>Verificando acceso...</h2>
        <div class="auth-spinner"></div>
    </div>

    <header>

        <nav>
            <div class="nav-logo empathy-logo">
                <!-- <img src="images/logo.png" alt="Logo" style="height:40px; vertical-align:middle; margin-right:10px;"> -->
                <span class="site-title">
                    <span class="empathy-letter empathy-e">E</span>
                    <span class="empathy-letter empathy-m">m</span>
                    <span class="empathy-letter empathy-p">p</span>
                    <span class="empathy-letter empathy-a">a</span>
                    <span class="empathy-letter empathy-t">t</span>
                    <span class="empathy-letter empathy-h">h</span>
                    <span class="empathy-letter empathy-y">y</span>
                </span>
            </div>
            <ul class="nav-links">
                <li><a href="#inicio" class="nav-button">Inicio</a></li>
                <li><a href="#testimonios" class="nav-button">Testimonios</a></li>
                <li><a href="#recursos" class="nav-button">Recursos</a></li>
                <li><a href="#contacto" class="nav-button">Contacto</a></li>
                <li><a href="#nosotros" class="nav-button">Nosotros</a></li>
                <li><a href="#estadisticas" class="nav-button">üìä Estad√≠sticas</a></li>
                <li><a href="#chat" class="nav-button chat-button"><span>Chat en Vivo</span></a></li>
                <li><a href="#" class="nav-button logout-button" onclick="logout()" style="opacity: 0.7; font-size: 0.9rem;">üö™ Salir</a></li>
            </ul>
        </nav>
    </header>
    <section id="inicio" style="display:block;">
        <div style="min-height: 80vh; display: flex; align-items: center; justify-content: center; background: linear-gradient(135deg, #f6e5f5, #e8f0ff); text-align: center; padding: 40px 20px;">
            <div>
                <h1 style="font-size: 3.5rem; color: #5d4e6d; margin-bottom: 30px; font-family: 'Super Adorable', cursive;">
                    Bienvenido a Empathy
                </h1>
                <p style="font-size: 1.3rem; color: #666; margin-bottom: 40px; max-width: 600px; line-height: 1.6;">
                    Un espacio seguro donde puedes encontrar apoyo, comprensi√≥n y herramientas para tu bienestar emocional.
                </p>
                <div style="display: flex; gap: 20px; justify-content: center; flex-wrap: wrap;">
                    <a href="#testimonios" style="background: linear-gradient(135deg, #4A148C, #1A237E); color: white; padding: 15px 30px; border-radius: 25px; text-decoration: none; font-weight: 600; transition: transform 0.3s ease;">
                        Ver Testimonios
                    </a>
                    <a href="#nosotros" style="background: linear-gradient(135deg, #B71C1C, #E65100); color: white; padding: 15px 30px; border-radius: 25px; text-decoration: none; font-weight: 600; transition: transform 0.3s ease;">
                        Conoce al Equipo
                    </a>
                </div>
            </div>
        </div>
    </section>
    <section id="testimonios" class="testimonios-section" style="display:none;">
        <div class="testimonios-container">
            <!-- Testimonio 1 -->
            <div class="testimonio-carta-wrapper">
                <svg class="sobre-cerrado" viewBox="0 0 400 300" xmlns="http://www.w3.org/2000/svg">
                    <!-- Definiciones para sombras y gradientes -->
                    <defs>
                        <filter id="sombraSobre1" x="-20%" y="-20%" width="140%" height="140%">
                            <feGaussianBlur in="SourceAlpha" stdDeviation="3"/>
                            <feOffset dx="2" dy="5" result="offset"/>
                            <feFlood flood-color="#000" flood-opacity="0.2"/>
                            <feComposite in2="offset" operator="in"/>
                            <feMerge>
                                <feMergeNode/>
                                <feMergeNode in="SourceGraphic"/>
                            </feMerge>
                        </filter>
                        <filter id="sombraHoja1" x="-10%" y="-10%" width="120%" height="120%">
                            <feGaussianBlur in="SourceAlpha" stdDeviation="1"/>
                            <feOffset dx="0" dy="1" result="offset"/>
                            <feFlood flood-color="#000" flood-opacity="0.15"/>
                            <feComposite in2="offset" operator="in"/>
                            <feMerge>
                                <feMergeNode/>
                                <feMergeNode in="SourceGraphic"/>
                            </feMerge>
                        </filter>
                        <filter id="sombraSello1" x="-30%" y="-30%" width="160%" height="160%">
                            <feGaussianBlur in="SourceAlpha" stdDeviation="2"/>
                            <feOffset dx="1" dy="3" result="offset"/>
                            <feFlood flood-color="#000" flood-opacity="0.4"/>
                            <feComposite in2="offset" operator="in"/>
                            <feMerge>
                                <feMergeNode/>
                                <feMergeNode in="SourceGraphic"/>
                            </feMerge>
                        </filter>
                        <radialGradient id="gradienteSello1" cx="0.3" cy="0.3" r="0.8">
                            <stop offset="0%" style="stop-color:#A52A2A;stop-opacity:1" />
                            <stop offset="60%" style="stop-color:#8B0000;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#5D0000;stop-opacity:1" />
                        </radialGradient>
                        <linearGradient id="gradienteCuerpo1" x1="0%" y1="0%" x2="0%" y2="100%">
                            <stop offset="0%" style="stop-color:#fafafa;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#f0f0f0;stop-opacity:1" />
                        </linearGradient>
                        <linearGradient id="gradienteTapa1" x1="0%" y1="0%" x2="0%" y2="100%">
                            <stop offset="0%" style="stop-color:#e8e8e8;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#d5d5d5;stop-opacity:1" />
                        </linearGradient>
                    </defs>
                    
                    <!-- Cuerpo principal del sobre -->
                    <rect x="80" y="120" width="240" height="140" fill="url(#gradienteCuerpo1)" stroke="#ccc" stroke-width="2" rx="3" filter="url(#sombraSobre1)"/>
                    
                    <!-- Forma en X (parte trasera del sobre cerrado) -->
                    <polygon points="80,120 200,200 320,120 320,260 200,200 80,260" fill="#e0e0e0" stroke="#bbb" stroke-width="1" opacity="0.3"/>
                    
                    <!-- Hoja/carta que se desliza hacia arriba en hover - OCULTA INICIALMENTE -->
                    <g class="carta-contenido" transform="translate(0,0)">
                        <!-- Papel de la carta -->
                        <rect x="90" y="130" width="220" height="120" fill="#ffffff" stroke="#e0e0e0" stroke-width="1" rx="2" filter="url(#sombraHoja1)" opacity="0.95"/>
                        
                        <!-- Contenido del testimonio -->
                        <foreignObject x="100" y="140" width="200" height="100">
                            <div xmlns="http://www.w3.org/1999/xhtml" style="font-family: 'Quicksand', sans-serif; font-size: 11px; line-height: 1.4; color: #333; padding: 8px; text-align: justify;">
                                "Empathy me ayud√≥ a superar momentos muy dif√≠ciles. El apoyo y la comprensi√≥n que encontr√© aqu√≠ transformaron mi vida completamente."
                            </div>
                        </foreignObject>
                    </g>
                    
                    <!-- Bordes tricolores del sobre a√©reo -->
                    <!-- Borde izquierdo -->
                    <rect x="80" y="120" width="6" height="12" fill="#dc3545"/>
                    <rect x="80" y="132" width="6" height="12" fill="#ffffff"/>
                    <rect x="80" y="144" width="6" height="12" fill="#007bff"/>
                    <rect x="80" y="156" width="6" height="12" fill="#dc3545"/>
                    <rect x="80" y="168" width="6" height="12" fill="#ffffff"/>
                    <rect x="80" y="180" width="6" height="12" fill="#007bff"/>
                    <rect x="80" y="192" width="6" height="12" fill="#dc3545"/>
                    <rect x="80" y="204" width="6" height="12" fill="#ffffff"/>
                    <rect x="80" y="216" width="6" height="12" fill="#007bff"/>
                    <rect x="80" y="228" width="6" height="12" fill="#dc3545"/>
                    <rect x="80" y="240" width="6" height="12" fill="#ffffff"/>
                    <rect x="80" y="252" width="6" height="8" fill="#007bff"/>
                    
                    <!-- Borde derecho -->
                    <rect x="314" y="120" width="6" height="12" fill="#dc3545"/>
                    <rect x="314" y="132" width="6" height="12" fill="#ffffff"/>
                    <rect x="314" y="144" width="6" height="12" fill="#007bff"/>
                    <rect x="314" y="156" width="6" height="12" fill="#dc3545"/>
                    <rect x="314" y="168" width="6" height="12" fill="#ffffff"/>
                    <rect x="314" y="180" width="6" height="12" fill="#007bff"/>
                    <rect x="314" y="192" width="6" height="12" fill="#dc3545"/>
                    <rect x="314" y="204" width="6" height="12" fill="#ffffff"/>
                    <rect x="314" y="216" width="6" height="12" fill="#007bff"/>
                    <rect x="314" y="228" width="6" height="12" fill="#dc3545"/>
                    <rect x="314" y="240" width="6" height="12" fill="#ffffff"/>
                    <rect x="314" y="252" width="6" height="8" fill="#007bff"/>
                    
                    <!-- Borde inferior -->
                    <rect x="86" y="254" width="12" height="6" fill="#dc3545"/>
                    <rect x="98" y="254" width="12" height="6" fill="#ffffff"/>
                    <rect x="110" y="254" width="12" height="6" fill="#007bff"/>
                    <rect x="122" y="254" width="12" height="6" fill="#dc3545"/>
                    <rect x="134" y="254" width="12" height="6" fill="#ffffff"/>
                    <rect x="146" y="254" width="12" height="6" fill="#007bff"/>
                    <rect x="158" y="254" width="12" height="6" fill="#dc3545"/>
                    <rect x="170" y="254" width="12" height="6" fill="#ffffff"/>
                    <rect x="182" y="254" width="12" height="6" fill="#007bff"/>
                    <rect x="194" y="254" width="12" height="6" fill="#dc3545"/>
                    <rect x="206" y="254" width="12" height="6" fill="#ffffff"/>
                    <rect x="218" y="254" width="12" height="6" fill="#007bff"/>
                    <rect x="230" y="254" width="12" height="6" fill="#dc3545"/>
                    <rect x="242" y="254" width="12" height="6" fill="#ffffff"/>
                    <rect x="254" y="254" width="12" height="6" fill="#007bff"/>
                    <rect x="266" y="254" width="12" height="6" fill="#dc3545"/>
                    <rect x="278" y="254" width="12" height="6" fill="#ffffff"/>
                    <rect x="290" y="254" width="12" height="6" fill="#007bff"/>
                    <rect x="302" y="254" width="12" height="6" fill="#dc3545"/>
                    <rect x="314" y="254" width="6" height="6" fill="#ffffff"/>
                    
                    <!-- Solapa del sobre que se abre en hover -->
                    <g class="solapa-sobre" transform-origin="200 120">
                        <!-- Tapa cerrada del sobre -->
                        <polygon points="80,120 200,200 320,120" fill="url(#gradienteTapa1)" stroke="#aaa" stroke-width="2" filter="url(#sombraSobre1)"/>
                        
                        <!-- L√≠nea de sellado -->
                        <line x1="80" y1="120" x2="320" y2="120" stroke="#999" stroke-width="1.5" opacity="0.8"/>
                        
                        <!-- Sombra interior de sellado -->
                        <polygon points="80,120 200,200 320,120 300,130 200,185 100,130" fill="#d0d0d0" opacity="0.6"/>
                        
                        <!-- Sello redondo con logo en el centro del sobre (sobre la solapa) -->
                        <circle cx="200" cy="160" r="22" fill="#ffffff" stroke="#ddd" stroke-width="2" filter="url(#sombraSello1)" opacity="0.95"/>
                        <circle cx="200" cy="160" r="20" fill="none" stroke="#ccc" stroke-width="1" opacity="0.8"/>
                        <image x="182" y="142" width="36" height="36" href="images/logo.png" opacity="0.9"/>
                    </g>
                    
                    <!-- Firma manuscrita en la parte inferior izquierda del sobre -->
                    <text x="110" y="240" font-family="'Great Vibes', 'Dancing Script', cursive" font-size="16" font-weight="400" fill="#1A237E" transform="rotate(3 110 240)">
                        Mar√≠a Gonz√°lez
                    </text>
                </svg>
            </div>
            
            <!-- Testimonio 2 -->
            <div class="testimonio-carta-wrapper">
                <svg class="sobre-cerrado" viewBox="0 0 400 300" xmlns="http://www.w3.org/2000/svg">
                    <defs>
                        <filter id="sombraSobre2" x="-20%" y="-20%" width="140%" height="140%">
                            <feGaussianBlur in="SourceAlpha" stdDeviation="3"/>
                            <feOffset dx="2" dy="5" result="offset"/>
                            <feFlood flood-color="#000" flood-opacity="0.2"/>
                            <feComposite in2="offset" operator="in"/>
                            <feMerge>
                                <feMergeNode/>
                                <feMergeNode in="SourceGraphic"/>
                            </feMerge>
                        </filter>
                        <filter id="sombraHoja2" x="-10%" y="-10%" width="120%" height="120%">
                            <feGaussianBlur in="SourceAlpha" stdDeviation="1"/>
                            <feOffset dx="0" dy="1" result="offset"/>
                            <feFlood flood-color="#000" flood-opacity="0.15"/>
                            <feComposite in2="offset" operator="in"/>
                            <feMerge>
                                <feMergeNode/>
                                <feMergeNode in="SourceGraphic"/>
                            </feMerge>
                        </filter>
                        <filter id="sombraSello2" x="-30%" y="-30%" width="160%" height="160%">
                            <feGaussianBlur in="SourceAlpha" stdDeviation="2"/>
                            <feOffset dx="1" dy="3" result="offset"/>
                            <feFlood flood-color="#000" flood-opacity="0.4"/>
                            <feComposite in2="offset" operator="in"/>
                            <feMerge>
                                <feMergeNode/>
                                <feMergeNode in="SourceGraphic"/>
                            </feMerge>
                        </filter>
                        <radialGradient id="gradienteSello2" cx="0.3" cy="0.3" r="0.8">
                            <stop offset="0%" style="stop-color:#A52A2A;stop-opacity:1" />
                            <stop offset="60%" style="stop-color:#8B0000;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#5D0000;stop-opacity:1" />
                        </radialGradient>
                        <linearGradient id="gradienteCuerpo2" x1="0%" y1="0%" x2="0%" y2="100%">
                            <stop offset="0%" style="stop-color:#fafafa;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#f0f0f0;stop-opacity:1" />
                        </linearGradient>
                        <linearGradient id="gradienteTapa2" x1="0%" y1="0%" x2="0%" y2="100%">
                            <stop offset="0%" style="stop-color:#e8e8e8;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#d5d5d5;stop-opacity:1" />
                        </linearGradient>
                    </defs>
                    
                    <!-- Cuerpo principal del sobre -->
                    <rect x="80" y="120" width="240" height="140" fill="url(#gradienteCuerpo2)" stroke="#ccc" stroke-width="2" rx="3" filter="url(#sombraSobre2)"/>
                    
                    <!-- Forma en X (parte trasera del sobre cerrado) -->
                    <polygon points="80,120 200,200 320,120 320,260 200,200 80,260" fill="#e0e0e0" stroke="#bbb" stroke-width="1" opacity="0.3"/>
                    
                    <!-- Hoja/carta que se desliza hacia arriba en hover - OCULTA INICIALMENTE -->
                    <g class="carta-contenido" transform="translate(0,0)">
                        <!-- Papel de la carta -->
                        <rect x="90" y="130" width="220" height="120" fill="#ffffff" stroke="#e0e0e0" stroke-width="1" rx="2" filter="url(#sombraHoja2)" opacity="0.95"/>
                        
                        <!-- Contenido del testimonio -->
                        <foreignObject x="100" y="140" width="200" height="100">
                            <div xmlns="http://www.w3.org/1999/xhtml" style="font-family: 'Quicksand', sans-serif; font-size: 11px; line-height: 1.4; color: #333; padding: 8px; text-align: justify;">
                                "Gracias a Empathy, aprend√≠ a valorarme y a encontrar esperanza cuando todo parec√≠a perdido. Su equipo es excepcional."
                            </div>
                        </foreignObject>
                    </g>
                    
                    <!-- Bordes tricolores iguales -->
                    <rect x="80" y="120" width="6" height="12" fill="#dc3545"/>
                    <rect x="80" y="132" width="6" height="12" fill="#ffffff"/>
                    <rect x="80" y="144" width="6" height="12" fill="#007bff"/>
                    <rect x="80" y="156" width="6" height="12" fill="#dc3545"/>
                    <rect x="80" y="168" width="6" height="12" fill="#ffffff"/>
                    <rect x="80" y="180" width="6" height="12" fill="#007bff"/>
                    <rect x="80" y="192" width="6" height="12" fill="#dc3545"/>
                    <rect x="80" y="204" width="6" height="12" fill="#ffffff"/>
                    <rect x="80" y="216" width="6" height="12" fill="#007bff"/>
                    <rect x="80" y="228" width="6" height="12" fill="#dc3545"/>
                    <rect x="80" y="240" width="6" height="12" fill="#ffffff"/>
                    <rect x="80" y="252" width="6" height="8" fill="#007bff"/>
                    
                    <rect x="314" y="120" width="6" height="12" fill="#dc3545"/>
                    <rect x="314" y="132" width="6" height="12" fill="#ffffff"/>
                    <rect x="314" y="144" width="6" height="12" fill="#007bff"/>
                    <rect x="314" y="156" width="6" height="12" fill="#dc3545"/>
                    <rect x="314" y="168" width="6" height="12" fill="#ffffff"/>
                    <rect x="314" y="180" width="6" height="12" fill="#007bff"/>
                    <rect x="314" y="192" width="6" height="12" fill="#dc3545"/>
                    <rect x="314" y="204" width="6" height="12" fill="#ffffff"/>
                    <rect x="314" y="216" width="6" height="12" fill="#007bff"/>
                    <rect x="314" y="228" width="6" height="12" fill="#dc3545"/>
                    <rect x="314" y="240" width="6" height="12" fill="#ffffff"/>
                    <rect x="314" y="252" width="6" height="8" fill="#007bff"/>
                    
                    <!-- Borde inferior -->
                    <rect x="86" y="254" width="12" height="6" fill="#dc3545"/>
                    <rect x="98" y="254" width="12" height="6" fill="#ffffff"/>
                    <rect x="110" y="254" width="12" height="6" fill="#007bff"/>
                    <rect x="122" y="254" width="12" height="6" fill="#dc3545"/>
                    <rect x="134" y="254" width="12" height="6" fill="#ffffff"/>
                    <rect x="146" y="254" width="12" height="6" fill="#007bff"/>
                    <rect x="158" y="254" width="12" height="6" fill="#dc3545"/>
                    <rect x="170" y="254" width="12" height="6" fill="#ffffff"/>
                    <rect x="182" y="254" width="12" height="6" fill="#007bff"/>
                    <rect x="194" y="254" width="12" height="6" fill="#dc3545"/>
                    <rect x="206" y="254" width="12" height="6" fill="#ffffff"/>
                    <rect x="218" y="254" width="12" height="6" fill="#007bff"/>
                    <rect x="230" y="254" width="12" height="6" fill="#dc3545"/>
                    <rect x="242" y="254" width="12" height="6" fill="#ffffff"/>
                    <rect x="254" y="254" width="12" height="6" fill="#007bff"/>
                    <rect x="266" y="254" width="12" height="6" fill="#dc3545"/>
                    <rect x="278" y="254" width="12" height="6" fill="#ffffff"/>
                    <rect x="290" y="254" width="12" height="6" fill="#007bff"/>
                    <rect x="302" y="254" width="12" height="6" fill="#dc3545"/>
                    <rect x="314" y="254" width="6" height="6" fill="#ffffff"/>
                    
                    <!-- Solapa del sobre que se abre en hover -->
                    <g class="solapa-sobre" transform-origin="200 120">
                        <!-- Tapa cerrada del sobre -->
                        <polygon points="80,120 200,200 320,120" fill="url(#gradienteTapa2)" stroke="#aaa" stroke-width="2" filter="url(#sombraSobre2)"/>
                        
                        <!-- L√≠nea de sellado -->
                        <line x1="80" y1="120" x2="320" y2="120" stroke="#999" stroke-width="1.5" opacity="0.8"/>
                        
                        <!-- Sombra interior de sellado -->
                        <polygon points="80,120 200,200 320,120 300,130 200,185 100,130" fill="#d0d0d0" opacity="0.6"/>
                        
                        <!-- Sello redondo con logo en el centro del sobre (sobre la solapa) -->
                        <circle cx="200" cy="160" r="22" fill="#ffffff" stroke="#ddd" stroke-width="2" filter="url(#sombraSello2)" opacity="0.95"/>
                        <circle cx="200" cy="160" r="20" fill="none" stroke="#ccc" stroke-width="1" opacity="0.8"/>
                        <image x="182" y="142" width="36" height="36" href="images/logo.png" opacity="0.9"/>
                    </g>
                    
                    <!-- Firma manuscrita en la parte inferior izquierda del sobre -->
                    <text x="110" y="240" font-family="'Great Vibes', 'Dancing Script', cursive" font-size="16" font-weight="400" fill="#1A237E" transform="rotate(-3 110 240)">
                        Carlos Rodr√≠guez
                    </text>
                </svg>
            </div>
            
            <!-- Testimonio 3 -->
            <div class="testimonio-carta-wrapper">
                <svg class="sobre-cerrado" viewBox="0 0 400 300" xmlns="http://www.w3.org/2000/svg">
                    <defs>
                        <filter id="sombraSobre3" x="-20%" y="-20%" width="140%" height="140%">
                            <feGaussianBlur in="SourceAlpha" stdDeviation="3"/>
                            <feOffset dx="2" dy="5" result="offset"/>
                            <feFlood flood-color="#000" flood-opacity="0.2"/>
                            <feComposite in2="offset" operator="in"/>
                            <feMerge>
                                <feMergeNode/>
                                <feMergeNode in="SourceGraphic"/>
                            </feMerge>
                        </filter>
                        <filter id="sombraHoja3" x="-10%" y="-10%" width="120%" height="120%">
                            <feGaussianBlur in="SourceAlpha" stdDeviation="1"/>
                            <feOffset dx="0" dy="1" result="offset"/>
                            <feFlood flood-color="#000" flood-opacity="0.15"/>
                            <feComposite in2="offset" operator="in"/>
                            <feMerge>
                                <feMergeNode/>
                                <feMergeNode in="SourceGraphic"/>
                            </feMerge>
                        </filter>
                        <filter id="sombraSello3" x="-30%" y="-30%" width="160%" height="160%">
                            <feGaussianBlur in="SourceAlpha" stdDeviation="2"/>
                            <feOffset dx="1" dy="3" result="offset"/>
                            <feFlood flood-color="#000" flood-opacity="0.4"/>
                            <feComposite in2="offset" operator="in"/>
                            <feMerge>
                                <feMergeNode/>
                                <feMergeNode in="SourceGraphic"/>
                            </feMerge>
                        </filter>
                        <radialGradient id="gradienteSello3" cx="0.3" cy="0.3" r="0.8">
                            <stop offset="0%" style="stop-color:#A52A2A;stop-opacity:1" />
                            <stop offset="60%" style="stop-color:#8B0000;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#5D0000;stop-opacity:1" />
                        </radialGradient>
                        <linearGradient id="gradienteCuerpo3" x1="0%" y1="0%" x2="0%" y2="100%">
                            <stop offset="0%" style="stop-color:#fafafa;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#f0f0f0;stop-opacity:1" />
                        </linearGradient>
                        <linearGradient id="gradienteTapa3" x1="0%" y1="0%" x2="0%" y2="100%">
                            <stop offset="0%" style="stop-color:#e8e8e8;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#d5d5d5;stop-opacity:1" />
                        </linearGradient>
                    </defs>
                    
                    <!-- Cuerpo principal del sobre -->
                    <rect x="80" y="120" width="240" height="140" fill="url(#gradienteCuerpo3)" stroke="#ccc" stroke-width="2" rx="3" filter="url(#sombraSobre3)"/>
                    
                    <!-- Forma en X (parte trasera del sobre cerrado) -->
                    <polygon points="80,120 200,200 320,120 320,260 200,200 80,260" fill="#e0e0e0" stroke="#bbb" stroke-width="1" opacity="0.3"/>
                    
                    <!-- Hoja/carta que se desliza hacia arriba en hover - OCULTA INICIALMENTE -->
                    <g class="carta-contenido" transform="translate(0,0)">
                        <!-- Papel de la carta -->
                        <rect x="90" y="130" width="220" height="120" fill="#ffffff" stroke="#e0e0e0" stroke-width="1" rx="2" filter="url(#sombraHoja3)" opacity="0.95"/>
                        
                        <!-- Contenido del testimonio -->
                        <foreignObject x="100" y="140" width="200" height="100">
                            <div xmlns="http://www.w3.org/1999/xhtml" style="font-family: 'Quicksand', sans-serif; font-size: 11px; line-height: 1.4; color: #333; padding: 8px; text-align: justify;">
                                "El acompa√±amiento de Empathy fue fundamental en mi proceso de sanaci√≥n. Encontr√© un espacio seguro para crecer."
                            </div>
                        </foreignObject>
                    </g>
                    
                    <!-- Bordes tricolores iguales -->
                    <rect x="80" y="120" width="6" height="12" fill="#dc3545"/>
                    <rect x="80" y="132" width="6" height="12" fill="#ffffff"/>
                    <rect x="80" y="144" width="6" height="12" fill="#007bff"/>
                    <rect x="80" y="156" width="6" height="12" fill="#dc3545"/>
                    <rect x="80" y="168" width="6" height="12" fill="#ffffff"/>
                    <rect x="80" y="180" width="6" height="12" fill="#007bff"/>
                    <rect x="80" y="192" width="6" height="12" fill="#dc3545"/>
                    <rect x="80" y="204" width="6" height="12" fill="#ffffff"/>
                    <rect x="80" y="216" width="6" height="12" fill="#007bff"/>
                    <rect x="80" y="228" width="6" height="12" fill="#dc3545"/>
                    <rect x="80" y="240" width="6" height="12" fill="#ffffff"/>
                    <rect x="80" y="252" width="6" height="8" fill="#007bff"/>
                    
                    <rect x="314" y="120" width="6" height="12" fill="#dc3545"/>
                    <rect x="314" y="132" width="6" height="12" fill="#ffffff"/>
                    <rect x="314" y="144" width="6" height="12" fill="#007bff"/>
                    <rect x="314" y="156" width="6" height="12" fill="#dc3545"/>
                    <rect x="314" y="168" width="6" height="12" fill="#ffffff"/>
                    <rect x="314" y="180" width="6" height="12" fill="#007bff"/>
                    <rect x="314" y="192" width="6" height="12" fill="#dc3545"/>
                    <rect x="314" y="204" width="6" height="12" fill="#ffffff"/>
                    <rect x="314" y="216" width="6" height="12" fill="#007bff"/>
                    <rect x="314" y="228" width="6" height="12" fill="#dc3545"/>
                    <rect x="314" y="240" width="6" height="12" fill="#ffffff"/>
                    <rect x="314" y="252" width="6" height="8" fill="#007bff"/>
                    
                    <!-- Borde inferior -->
                    <rect x="86" y="254" width="12" height="6" fill="#dc3545"/>
                    <rect x="98" y="254" width="12" height="6" fill="#ffffff"/>
                    <rect x="110" y="254" width="12" height="6" fill="#007bff"/>
                    <rect x="122" y="254" width="12" height="6" fill="#dc3545"/>
                    <rect x="134" y="254" width="12" height="6" fill="#ffffff"/>
                    <rect x="146" y="254" width="12" height="6" fill="#007bff"/>
                    <rect x="158" y="254" width="12" height="6" fill="#dc3545"/>
                    <rect x="170" y="254" width="12" height="6" fill="#ffffff"/>
                    <rect x="182" y="254" width="12" height="6" fill="#007bff"/>
                    <rect x="194" y="254" width="12" height="6" fill="#dc3545"/>
                    <rect x="206" y="254" width="12" height="6" fill="#ffffff"/>
                    <rect x="218" y="254" width="12" height="6" fill="#007bff"/>
                    <rect x="230" y="254" width="12" height="6" fill="#dc3545"/>
                    <rect x="242" y="254" width="12" height="6" fill="#ffffff"/>
                    <rect x="254" y="254" width="12" height="6" fill="#007bff"/>
                    <rect x="266" y="254" width="12" height="6" fill="#dc3545"/>
                    <rect x="278" y="254" width="12" height="6" fill="#ffffff"/>
                    <rect x="290" y="254" width="12" height="6" fill="#007bff"/>
                    <rect x="302" y="254" width="12" height="6" fill="#dc3545"/>
                    <rect x="314" y="254" width="6" height="6" fill="#ffffff"/>
                    
                    <!-- Solapa del sobre que se abre en hover -->
                    <g class="solapa-sobre" transform-origin="200 120">
                        <!-- Tapa cerrada del sobre -->
                        <polygon points="80,120 200,200 320,120" fill="url(#gradienteTapa3)" stroke="#aaa" stroke-width="2" filter="url(#sombraSobre3)"/>
                        
                        <!-- L√≠nea de sellado -->
                        <line x1="80" y1="120" x2="320" y2="120" stroke="#999" stroke-width="1.5" opacity="0.8"/>
                        
                        <!-- Sombra interior de sellado -->
                        <polygon points="80,120 200,200 320,120 300,130 200,185 100,130" fill="#d0d0d0" opacity="0.6"/>
                        
                        <!-- Sello redondo con logo en el centro del sobre (sobre la solapa) -->
                        <circle cx="200" cy="160" r="22" fill="#ffffff" stroke="#ddd" stroke-width="2" filter="url(#sombraSello3)" opacity="0.95"/>
                        <circle cx="200" cy="160" r="20" fill="none" stroke="#ccc" stroke-width="1" opacity="0.8"/>
                        <image x="182" y="142" width="36" height="36" href="images/logo.png" opacity="0.9"/>
                    </g>
                    
                    <!-- Firma manuscrita en la parte inferior izquierda del sobre -->
                    <text x="110" y="240" font-family="'Great Vibes', 'Dancing Script', cursive" font-size="16" font-weight="400" fill="#1A237E" transform="rotate(-3 110 240)">
                        Ana Mart√≠nez
                    </text>
                </svg>
            </div>
        </div>
        
        <!-- Bot√≥n para crear nuevo testimonio -->
        <div style="text-align: center; margin-top: 40px;">
            <button class="btn-empathy" id="btn-crear-testimonio">Crea tu testimonio</button>
        </div>
    </section>
    
    <!-- SECCI√ìN NOSOTROS - CONTENIDO ORIGINAL CON ESTILOS FORZADOS -->
    <section id="nosotros" style="display:none; background: linear-gradient(135deg, #f6e5f5, #e8f0ff); padding: 80px 20px; min-height: 100vh;">
        <h2 class="nosotrosTit" style="font-family: 'Super Adorable', cursive; font-size: 3rem; color: #5d4e6d; text-align: center; margin-bottom: 40px; text-shadow: 0 2px 8px rgba(0,0,0,0.10);">Nosotros</h2>
        
        <div class="contenido" style="max-width: 1200px; margin: 0 auto 60px auto; padding: 40px; background: rgba(255, 255, 255, 0.9); border-radius: 20px; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);">
            <p style="font-size: 1.1rem; color: #555; line-height: 1.8; margin-bottom: 25px; text-align: justify;">Somos un equipo comprometido con el bienestar emocional y social, dedicados a crear espacios de apoyo
                y empat√≠a para quienes atraviesan momentos dif√≠ciles. Nuestra misi√≥n es inspirar esperanza y
                acompa√±ar a las personas en su camino hacia una vida mejor.</p>
            <br>
            <ol style="font-size: 1.1rem; color: #555; padding-left: 20px;">
                <li style="margin: 10px 0;">Escucha activa y acompa√±amiento</li>
                <li style="margin: 10px 0;">Recursos y herramientas para el bienestar</li>
                <li style="margin: 10px 0;">Comunidad de apoyo</li>
            </ol>
        </div>
        
        <div class="contenido" style="max-width: 1200px; margin: 0 auto 60px auto; padding: 40px; background: rgba(255, 255, 255, 0.9); border-radius: 20px; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);">
            <h2 class="nosotrosTit" style="font-family: 'Super Adorable', cursive; font-size: 2.5rem; color: #A48CA4; text-align: center; margin: 2rem 0;">Nuestra Misi√≥n</h2>
            <p style="font-size: 1.1rem; color: #555; line-height: 1.8; margin-bottom: 25px; text-align: center;">Empoderar a las personas a trav√©s de la empat√≠a y el apoyo emocional.</p>
            
            <h2 class="nosotrosTit" style="font-family: 'Super Adorable', cursive; font-size: 2.5rem; color: #A48CA4; text-align: center; margin: 2rem 0;">Nuestra Visi√≥n</h2>
            <p style="font-size: 1.1rem; color: #555; line-height: 1.8; margin-bottom: 25px; text-align: center;">Crear un mundo donde todos se sientan escuchados y comprendidos.</p>
            
            <h2 class="nosotrosTit" style="font-family: 'Super Adorable', cursive; font-size: 2.5rem; color: #A48CA4; text-align: center; margin: 2rem 0;">Nuestros Valores</h2>
            <ul style="list-style: none; padding: 0; max-width: 600px; margin: 0 auto;">
                <li style="background: linear-gradient(135deg, #4A148C, #1A237E); color: white; padding: 15px 20px; margin: 12px 0; border-radius: 25px; font-weight: 500; position: relative; padding-left: 55px; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(74, 20, 140, 0.2);">
                    <span style="position: absolute; left: 20px; font-weight: bold; font-size: 1.3rem; background: rgba(255, 255, 255, 0.2); width: 25px; height: 25px; border-radius: 50%; display: flex; align-items: center; justify-content: center; top: 50%; transform: translateY(-50%);">‚úì</span>
                    Empat√≠a
                </li>
                <li style="background: linear-gradient(135deg, #4A148C, #1A237E); color: white; padding: 15px 20px; margin: 12px 0; border-radius: 25px; font-weight: 500; position: relative; padding-left: 55px; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(74, 20, 140, 0.2);">
                    <span style="position: absolute; left: 20px; font-weight: bold; font-size: 1.3rem; background: rgba(255, 255, 255, 0.2); width: 25px; height: 25px; border-radius: 50%; display: flex; align-items: center; justify-content: center; top: 50%; transform: translateY(-50%);">‚úì</span>
                    Respeto
                </li>
                <li style="background: linear-gradient(135deg, #4A148C, #1A237E); color: white; padding: 15px 20px; margin: 12px 0; border-radius: 25px; font-weight: 500; position: relative; padding-left: 55px; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(74, 20, 140, 0.2);">
                    <span style="position: absolute; left: 20px; font-weight: bold; font-size: 1.3rem; background: rgba(255, 255, 255, 0.2); width: 25px; height: 25px; border-radius: 50%; display: flex; align-items: center; justify-content: center; top: 50%; transform: translateY(-50%);">‚úì</span>
                    Solidaridad
                </li>
                <li style="background: linear-gradient(135deg, #4A148C, #1A237E); color: white; padding: 15px 20px; margin: 12px 0; border-radius: 25px; font-weight: 500; position: relative; padding-left: 55px; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(74, 20, 140, 0.2);">
                    <span style="position: absolute; left: 20px; font-weight: bold; font-size: 1.3rem; background: rgba(255, 255, 255, 0.2); width: 25px; height: 25px; border-radius: 50%; display: flex; align-items: center; justify-content: center; top: 50%; transform: translateY(-50%);">‚úì</span>
                    Inclusi√≥n
                </li>
            </ul>
        </div>
        
        <!-- Secci√≥n de Desarrolladores con dise√±o original y estilos forzados -->
        <div class="desarrolladores-section" style="max-width: 1200px; margin: 0 auto; padding: 40px; background: rgba(255, 255, 255, 0.9); border-radius: 20px; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1); text-align: center;">
            <h2 class="nosotrosTit" style="font-family: 'Super Adorable', cursive; font-size: 2.5rem; color: #A48CA4; text-align: center; margin: 2rem 0; letter-spacing: 1px;">Nuestros Desarrolladores</h2>
            <div class="card-container">
                
                <!-- TARJETA MATEO -->
                <div class="dev-card-wrapper">
                    <div class="dev-card">
                        <!-- FRENTE DE LA TARJETA -->
                        <div class="card-front">
                            <div class="card-image">
                                <img src="images/avatar1.jpg" alt="Mateo">
                            </div>
                            <div class="card-name">
                                <h3>Mateo</h3>
                            </div>
                        </div>
                        <!-- REVERSO DE LA TARJETA -->
                        <div class="card-back">
                            <div class="card-info">
                                <h3>Mateo Suarez</h3>
                                <p class="role">Frontend Developer</p>
                                <p class="description">Apasionado del dise√±o web y la experiencia de usuario. Especializado en crear interfaces intuitivas y visualmente atractivas.</p>
                                <div class="skills">
                                    <span>HTML/CSS</span>
                                    <span>JavaScript</span>
                                    <span>React</span>
                                    <span>UI/UX</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- TARJETA JHONATAN -->
                <div class="dev-card-wrapper">
                    <div class="dev-card">
                        <!-- FRENTE DE LA TARJETA -->
                        <div class="card-front">
                            <div class="card-image">
                                <img src="images/avatar2.jpg" alt="Jhonatan">
                            </div>
                            <div class="card-name">
                                <h3>Jhonatan</h3>
                            </div>
                        </div>
                        <!-- REVERSO DE LA TARJETA -->
                        <div class="card-back">
                            <div class="card-info">
                                <h3>Jhonatan Martinez</h3>
                                <p class="role">Backend Developer</p>
                                <p class="description">Especialista en bases de datos y backend. Enfocado en crear sistemas robustos y escalables para aplicaciones web.</p>
                                <div class="skills">
                                    <span>Python</span>
                                    <span>Django</span>
                                    <span>PostgreSQL</span>
                                    <span>APIs</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- TARJETA KAREN -->
                <div class="dev-card-wrapper">
                    <div class="dev-card">
                        <!-- FRENTE DE LA TARJETA -->
                        <div class="card-front">
                            <div class="card-image">
                                <img src="images/avatar3.jpg" alt="Karen">
                            </div>
                            <div class="card-name">
                                <h3>Karen</h3>
                            </div>
                        </div>
                        <!-- REVERSO DE LA TARJETA -->
                        <div class="card-back">
                            <div class="card-info">
                                <h3>Karen L√≥pez</h3>
                                <p class="role">Full Stack Developer</p>
                                <p class="description">Creativa y enfocada en resolver problemas. Combina dise√±o y desarrollo para crear soluciones completas e innovadoras.</p>
                                <div class="skills">
                                    <span>JavaScript</span>
                                    <span>Node.js</span>
                                    <span>MongoDB</span>
                                    <span>Design</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    <!-- Secci√≥n de Estad√≠sticas -->
    <section id="estadisticas" style="display:none; background: linear-gradient(135deg, #f6e5f5, #e8f0ff); padding: 80px 20px; min-height: 100vh;">
        <div style="max-width: 1200px; margin: 0 auto;">
            <h2 style="font-family: 'Super Adorable', cursive; font-size: 3rem; color: #5d4e6d; text-align: center; margin-bottom: 50px;">
                üìä Estad√≠sticas de Visitantes
            </h2>
            
            <!-- Panel de Resumen -->
            <div style="background: rgba(255, 255, 255, 0.95); border-radius: 20px; padding: 30px; margin-bottom: 40px; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);">
                <h3 style="color: #5d4e6d; text-align: center; margin-bottom: 30px; font-size: 1.8rem;">Resumen General</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; text-align: center;">
                    <div style="background: linear-gradient(135deg, #4A148C, #1A237E); color: white; padding: 20px; border-radius: 15px;">
                        <h4 style="margin: 0; font-size: 2rem;" id="total-users">0</h4>
                        <p style="margin: 5px 0 0 0;">Total de Usuarios</p>
                    </div>
                    <div style="background: linear-gradient(135deg, #E91E63, #AD1457); color: white; padding: 20px; border-radius: 15px;">
                        <h4 style="margin: 0; font-size: 2rem;" id="total-women">0</h4>
                        <p style="margin: 5px 0 0 0;">Mujeres</p>
                    </div>
                    <div style="background: linear-gradient(135deg, #2196F3, #1565C0); color: white; padding: 20px; border-radius: 15px;">
                        <h4 style="margin: 0; font-size: 2rem;" id="total-men">0</h4>
                        <p style="margin: 5px 0 0 0;">Hombres</p>
                    </div>
                    <div style="background: linear-gradient(135deg, #FF9800, #F57C00); color: white; padding: 20px; border-radius: 15px;">
                        <h4 style="margin: 0; font-size: 2rem;" id="total-adults">0</h4>
                        <p style="margin: 5px 0 0 0;">Mayores de Edad</p>
                    </div>
                </div>
            </div>

            <!-- Gr√°ficas -->
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 30px;">
                <!-- Gr√°fica de G√©neros -->
                <div style="background: rgba(255, 255, 255, 0.95); border-radius: 20px; padding: 30px; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);">
                    <h3 style="color: #5d4e6d; text-align: center; margin-bottom: 30px;">Distribuci√≥n por G√©nero</h3>
                    <div style="position: relative; height: 300px; display: flex; align-items: center; justify-content: center;">
                        <canvas id="genderChart" width="250" height="250"></canvas>
                    </div>
                    <div id="gender-legend" style="display: flex; justify-content: center; gap: 20px; margin-top: 20px; flex-wrap: wrap;">
                        <!-- Leyenda generada din√°micamente -->
                    </div>
                </div>

                <!-- Gr√°fica de Edades -->
                <div style="background: rgba(255, 255, 255, 0.95); border-radius: 20px; padding: 30px; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);">
                    <h3 style="color: #5d4e6d; text-align: center; margin-bottom: 30px;">Distribuci√≥n por Edad</h3>
                    <div style="position: relative; height: 300px; display: flex; align-items: center; justify-content: center;">
                        <canvas id="ageChart" width="250" height="250"></canvas>
                    </div>
                    <div id="age-legend" style="display: flex; justify-content: center; gap: 20px; margin-top: 20px; flex-wrap: wrap;">
                        <!-- Leyenda generada din√°micamente -->
                    </div>
                </div>
            </div>

            <!-- Tabla Detallada -->
            <div style="background: rgba(255, 255, 255, 0.95); border-radius: 20px; padding: 30px; margin-top: 40px; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);">
                <h3 style="color: #5d4e6d; text-align: center; margin-bottom: 30px;">An√°lisis Detallado</h3>
                <div id="detailed-stats" style="overflow-x: auto;">
                    <!-- Tabla generada din√°micamente -->
                </div>
            </div>

            <!-- Usuarios Recientes -->
            <div style="background: rgba(255, 255, 255, 0.95); border-radius: 20px; padding: 30px; margin-top: 40px; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);">
                <h3 style="color: #5d4e6d; text-align: center; margin-bottom: 30px;">üìã Usuarios Recientes</h3>
                <div id="recent-users-list" style="max-height: 300px; overflow-y: auto;">
                    <!-- Lista de usuarios recientes generada din√°micamente -->
                </div>
            </div>

            <!-- Informaci√≥n de Actualizaci√≥n Autom√°tica -->
            <div style="background: linear-gradient(135deg, #E8F5E8, #F0F8FF); border-radius: 20px; padding: 25px; margin-top: 40px; box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1); border-left: 5px solid #4CAF50;">
                <h3 style="color: #2E7D32; text-align: center; margin-bottom: 20px;">üîÑ Actualizaci√≥n Autom√°tica</h3>
                <p style="color: #555; text-align: center; margin-bottom: 15px;">
                    Las estad√≠sticas se actualizan autom√°ticamente cada vez que un nuevo usuario se registra en el sistema.
                </p>
                <div style="text-align: center; margin-top: 20px;">
                    <button onclick="forceUpdateStatistics()" style="background: linear-gradient(135deg, #4CAF50, #45a049); color: white; border: none; padding: 12px 25px; border-radius: 20px; font-size: 1rem; cursor: pointer; box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3); transition: all 0.3s ease;">
                        üîÑ Actualizar Manualmente
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Secci√≥n de Recursos -->
    <section id="recursos" style="display:none;">
        <div>
            <h2>Recursos de Bienestar</h2>
            <div style="max-width: 800px; margin: 0 auto; background: rgba(255, 255, 255, 0.9); padding: 40px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);">
                <h3 style="color: #5d4e6d; margin-bottom: 30px; text-align: center;">Herramientas para tu Bienestar</h3>
                <div class="grid-recursos">
                    <div class="recurso-card">
                        <h4>üßò‚Äç‚ôÄÔ∏è Meditaci√≥n</h4>
                        <p style="color: #555;">T√©cnicas de relajaci√≥n y mindfulness para reducir el estr√©s y la ansiedad.</p>
                    </div>
                    <div class="recurso-card">
                        <h4>üìö Recursos Educativos</h4>
                        <p style="color: #555;">Art√≠culos y gu√≠as sobre salud mental y bienestar emocional.</p>
                    </div>
                    <div class="recurso-card">
                        <h4>ü§ù Apoyo Comunitario</h4>
                        <p style="color: #555;">Conecta con personas que comparten experiencias similares.</p>
                    </div>
                </div>
                <div style="text-align: center; margin-top: 30px;">
                    <button class="btn-empathy">Explorar Recursos</button>
                </div>
            </div>
        </div>
    </section>

    <!-- Secci√≥n de Contacto -->
    <section id="contacto" style="display:none;">
        <div>
            <h2>Cont√°ctanos</h2>
            <div>
                <div class="contact-section">
                    <h3 style="text-align: center; color: #5d4e6d; margin-bottom: 30px;">¬øNecesitas ayuda? Estamos aqu√≠ para apoyarte</h3>
                    <form class="contact-form">
                        <div class="form-container">
                            <div>
                                <label for="nombre">Nombre:</label>
                                <input type="text" id="nombre" name="nombre" required>

                                <label for="email">Email:</label>
                                <input type="email" id="email" name="email" required>

                                <label for="asunto">Asunto:</label>
                                <input type="text" id="asunto" name="asunto" required>

                                <label for="mensaje">Mensaje:</label>
                                <textarea id="mensaje" name="mensaje" placeholder="Cu√©ntanos c√≥mo podemos ayudarte..." required></textarea>

                                <button type="submit">Enviar Mensaje</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <!-- Bot√≥n Flotante del Chatbot (Esquina Inferior Derecha) -->
    <div id="chat-floating-icon" class="chat-floating-icon" onclick="window.abrirChatFlotante()">
        <img src="images/logo.png" alt="Habla con Violet - Tu espacio seguro" class="chat-icon-logo">
    </div>

    <!-- Ventana Flotante del Chatbot -->
    <div id="chat-flotante" class="chat-flotante" style="display: none;">
        <div class="chat-flotante-header">
            <h4>üíú Violet - Tu espacio seguro</h4>
            <button id="cerrar-chat-flotante" class="chat-control-btn" title="Cerrar">√ó</button>
        </div>
        <div class="chat-flotante-body">
            <div id="n8n-chat-container"></div>
        </div>
    </div>

    <!-- Modal flotante para crear testimonio -->
    <div id="modal-crear-testimonio" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Crear Nuevo Testimonio</h3>
                <button class="modal-close" id="cerrar-modal">&times;</button>
            </div>
            <form id="form-crear-testimonio" class="crear-testimonio-form">
                <div class="form-group">
                    <label for="nombre-testimonio">Tu nombre:</label>
                    <input type="text" id="nombre-testimonio" name="nombre" maxlength="50" required placeholder="Ingresa tu nombre">
                    <small class="char-counter">0/50</small>
                </div>
                
                <div class="form-group">
                    <label for="mensaje-testimonio">Tu testimonio:</label>
                    <textarea id="mensaje-testimonio" name="mensaje" rows="6" maxlength="300" required placeholder="Comparte tu experiencia y c√≥mo Empathy te ha ayudado..."></textarea>
                    <small class="char-counter">0/300</small>
                </div>
                
                <div class="form-group">
                    <label for="color-testimonio">Color del testimonio:</label>
                    <div class="color-picker-container">
                        <input type="color" id="color-testimonio" name="color" value="#A48CA4">
                        <span class="color-preview">Color seleccionado: #A48CA4</span>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="avatar-testimonio">Avatar personalizado:</label>
                    <div class="avatar-upload-container">
                        <input type="file" id="avatar-testimonio" name="avatar" accept="image/*" style="display: none;">
                        <div class="avatar-preview" id="avatar-preview">
                            <img id="avatar-preview-img" src="images/logo.png" alt="Preview">
                            <div class="upload-overlay">
                                <span>üì∑</span>
                                <p>Subir imagen</p>
                            </div>
                        </div>
                        <button type="button" class="btn-upload-avatar" onclick="document.getElementById('avatar-testimonio').click()">
                            Cambiar Avatar
                        </button>
                        <p class="upload-hint">Formatos: JPG, PNG, GIF. Se convertir√° autom√°ticamente a PNG circular.</p>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="color-sobre-testimonio">Color del sobre:</label>
                    <div class="color-sobre-container">
                        <input type="color" id="color-sobre-testimonio" name="colorSobre" value="#e8e8e8">
                        <div class="color-sobre-preview">
                            <div class="sobre-miniatura">
                                <div class="cuerpo-sobre"></div>
                                <div class="solapa-sobre"></div>
                            </div>
                            <span class="color-sobre-text">Color pastel aplicado</span>
                        </div>
                    </div>
                    <p class="color-sobre-hint">El color se convertir√° autom√°ticamente a tono pastel para el sobre.</p>
                </div>
                
                <div class="form-group">
                    <label for="color-carta-testimonio">Color de la carta:</label>
                    <div class="color-carta-container">
                        <input type="color" id="color-carta-testimonio" name="colorCarta" value="#d1c1e0">
                        <div class="color-carta-preview">
                            <div class="carta-miniatura">
                                <div class="fondo-carta"></div>
                                <div class="borde-carta"></div>
                                <div class="texto-carta">Carta</div>
                            </div>
                            <span class="color-carta-text">Color pastel aplicado</span>
                        </div>
                    </div>
                    <p class="color-carta-hint">El color se convertir√° autom√°ticamente a tono pastel para la carta.</p>
                </div>
                
                <button type="submit" class="btn-crear-testimonio">
                    Crear Mi Testimonio
                </button>
            </form>
        </div>
    </div>

    <script>
        // Funci√≥n de logout simple
        function logout() {
            if (confirm('¬øEst√°s seguro que deseas cerrar sesi√≥n?')) {
                localStorage.removeItem('empathy_session');
                console.log('üëã Sesi√≥n cerrada, redirigiendo...');
                window.location.href = 'index.html?logout=true';
            }
        }

        // ===== SISTEMA DE ESTAD√çSTICAS EN TIEMPO REAL =====
        // Instancia global del gestor de estad√≠sticas
        let statisticsManager;

        // Funci√≥n global para actualizar estad√≠sticas manualmente
        function updateStatistics() {
            if (!statisticsManager) {
                statisticsManager = new StatisticsManager();
            }
            statisticsManager.updateStatistics();
        }

        // Funci√≥n para forzar actualizaci√≥n manual
        function forceUpdateStatistics() {
            if (!statisticsManager) {
                statisticsManager = new StatisticsManager();
            }
            statisticsManager.forceUpdate();
        }
        // Inicializar cuando se carga la p√°gina
        document.addEventListener('DOMContentLoaded', function() {
            // Inicializar el gestor de estad√≠sticas con sistema de eventos
            statisticsManager = new StatisticsManager();
            
            // Actualizar estad√≠sticas cuando se muestra la secci√≥n
            const statsSection = document.getElementById('estadisticas');
            if (statsSection) {
                const observer = new MutationObserver(function(mutations) {
                    mutations.forEach(function(mutation) {
                        if (mutation.type === 'attributes' && mutation.attributeName === 'style') {
                            if (statsSection.style.display !== 'none') {
                                setTimeout(() => updateStatistics(), 100);
                            }
                        }
                    });
                });
                observer.observe(statsSection, { attributes: true });
            }

            console.log('üìä Sistema de estad√≠sticas en tiempo real inicializado');
        });

        // Agregar estilos para las notificaciones y elementos nuevos
        const additionalStyles = `
            <style>
                /* Estilos para usuarios recientes */
                .recent-user-item {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    padding: 15px 20px;
                    margin-bottom: 10px;
                    background: rgba(255, 255, 255, 0.8);
                    border-radius: 10px;
                    border-left: 4px solid #4CAF50;
                    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
                    transition: transform 0.2s ease;
                }

                .recent-user-item:hover {
                    transform: translateX(5px);
                }

                .user-info {
                    flex: 1;
                }

                .user-info strong {
                    color: #2E7D32;
                    font-size: 1.1rem;
                    display: block;
                    margin-bottom: 5px;
                }

                .user-details {
                    color: #666;
                    font-size: 0.9rem;
                }

                .user-date {
                    color: #888;
                    font-size: 0.8rem;
                    font-weight: 500;
                }

                /* Estilos para las leyendas */
                .legend-item {
                    display: flex;
                    align-items: center;
                    gap: 8px;
                    padding: 5px 10px;
                    background: rgba(255, 255, 255, 0.8);
                    border-radius: 8px;
                    margin-bottom: 5px;
                }

                .legend-color {
                    width: 16px;
                    height: 16px;
                    border-radius: 50%;
                    border: 2px solid rgba(255, 255, 255, 0.8);
                }

                .legend-label {
                    font-size: 0.9rem;
                    color: #555;
                    font-weight: 500;
                }

                /* Estilos para la tabla de estad√≠sticas */
                .stats-table {
                    width: 100%;
                    border-collapse: collapse;
                    font-family: 'Quicksand', sans-serif;
                }

                .stats-table th,
                .stats-table td {
                    padding: 12px 15px;
                    text-align: left;
                    border-bottom: 1px solid rgba(93, 78, 109, 0.1);
                }

                .stats-table th {
                    background: linear-gradient(135deg, #5d4e6d, #4a3c57);
                    color: white;
                    font-weight: 600;
                }

                .stats-table tr:hover {
                    background: rgba(93, 78, 109, 0.05);
                }

                .stats-table td:last-child {
                    font-weight: 600;
                    color: #4CAF50;
                }

                /* Animaciones para n√∫meros */
                @keyframes numberPulse {
                    0% { transform: scale(1); }
                    50% { transform: scale(1.1); }
                    100% { transform: scale(1); }
                }

                .number-animated {
                    animation: numberPulse 0.6s ease-in-out;
                }

                /* Animaci√≥n de loading */
                @keyframes spin {
                    0% { transform: rotate(0deg); }
                    100% { transform: rotate(360deg); }
                }

                /* Estilos para la ventana flotante del chatbot */
                .chat-flotante {
                    position: fixed;
                    bottom: 20px;
                    right: 20px;
                    width: 320px;
                    height: 480px;
                    background: white;
                    border-radius: 15px;
                    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
                    z-index: 1000;
                    overflow: hidden;
                    border: 2px solid #9c27b0;
                    animation: slideInUp 0.3s ease-out;
                }

                .chat-flotante.minimizado {
                    height: 60px;
                    animation: slideDown 0.3s ease-out;
                }

                .chat-flotante-header {
                    background: linear-gradient(135deg, #9c27b0, #7b1fa2);
                    color: white;
                    padding: 15px 20px;
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    cursor: move;
                    user-select: none;
                }

                .chat-flotante-titulo {
                    display: flex;
                    align-items: center;
                    gap: 10px;
                }

                .chat-flotante-titulo h4 {
                    margin: 0;
                    font-size: 1rem;
                    font-weight: 600;
                }

                .chat-status-indicator {
                    width: 10px;
                    height: 10px;
                    background: #4CAF50;
                    border-radius: 50%;
                    animation: pulse 2s infinite;
                }

                .chat-flotante-controles {
                    display: flex;
                    gap: 5px;
                }

                .chat-control-btn {
                    background: rgba(255, 255, 255, 0.2);
                    border: none;
                    color: white;
                    width: 25px;
                    height: 25px;
                    border-radius: 50%;
                    cursor: pointer;
                    font-size: 16px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    transition: all 0.2s ease;
                }

                .chat-control-btn:hover {
                    background: rgba(255, 255, 255, 0.3);
                    transform: scale(1.1);
                }

                .chat-flotante-body {
                    height: calc(100% - 60px);
                    padding: 0 !important;
                    margin: 0 !important;
                    overflow: hidden;
                    background: white;
                    display: flex;
                    flex-direction: column;
                    position: relative;
                }

                #n8n-chat-container {
                    height: 100% !important;
                    width: 100% !important;
                    background: white !important;
                    overflow: hidden !important;
                    display: flex !important;
                    flex-direction: column !important;
                    position: absolute !important;
                    top: 0 !important;
                    left: 0 !important;
                    right: 0 !important;
                    bottom: 0 !important;
                    padding: 0 !important;
                    margin: 0 !important;
                    border: none !important;
                    border-radius: 0 !important;
                    box-shadow: none !important;
                }

                /* Forzar estilos en todos los elementos hijos del chatbot n8n */
                #n8n-chat-container *,
                #n8n-chat-container *::before,
                #n8n-chat-container *::after {
                    box-sizing: border-box !important;
                    max-width: 100% !important;
                }

                /* Contenedor principal del chat n8n - m√°s espec√≠fico */
                #n8n-chat-container > div,
                #n8n-chat-container > div > div,
                #n8n-chat-container [data-testid="chat-container"], 
                #n8n-chat-container .chat-container,
                #n8n-chat-container .n8n-chat,
                #n8n-chat-container .n8n-chat-widget {
                    height: 100% !important;
                    width: 100% !important;
                    display: flex !important;
                    flex-direction: column !important;
                    background: white !important;
                    border-radius: 0 !important;
                    box-shadow: none !important;
                    border: none !important;
                    padding: 0 !important;
                    margin: 0 !important;
                    position: relative !important;
                    overflow: hidden !important;
                }

                /* Header del chat n8n */
                #n8n-chat-container .chat-header,
                #n8n-chat-container [data-testid="chat-header"] {
                    flex-shrink: 0 !important;
                    background: transparent !important;
                    border-bottom: 1px solid #e0e0e0 !important;
                    padding: 10px 15px !important;
                    height: auto !important;
                    min-height: 50px !important;
                }

                /* √Årea de mensajes del chat n8n */
                #n8n-chat-container .chat-messages,
                #n8n-chat-container [data-testid="chat-messages"],
                #n8n-chat-container .messages-container,
                #n8n-chat-container .conversation {
                    flex: 1 !important;
                    overflow-y: auto !important;
                    padding: 10px 15px !important;
                    background: white !important;
                    height: auto !important;
                    min-height: 0 !important;
                }

                /* Input del chat n8n */
                #n8n-chat-container .chat-input,
                #n8n-chat-container [data-testid="chat-input"],
                #n8n-chat-container .input-container,
                #n8n-chat-container .message-input {
                    flex-shrink: 0 !important;
                    padding: 10px 15px !important;
                    background: white !important;
                    border-top: 1px solid #e0e0e0 !important;
                    height: auto !important;
                    min-height: 60px !important;
                }

                /* Remover cualquier posicionamiento absoluto/fixed problem√°tico */
                #n8n-chat-container .chat-overlay,
                #n8n-chat-container .chat-backdrop,
                #n8n-chat-container .overlay {
                    display: none !important;
                }

                /* Forzar que cualquier iframe ocupe todo el espacio */
                #n8n-chat-container iframe {
                    width: 100% !important;
                    height: 100% !important;
                    border: none !important;
                    position: absolute !important;
                    top: 0 !important;
                    left: 0 !important;
                }

                /* Resetear z-index para evitar conflictos */
                #n8n-chat-container * {
                    z-index: auto !important;
                }

                /* Estilos espec√≠ficos para elementos n8n que pueden causar problemas */
                #n8n-chat-container .n8n-chat-widget,
                #n8n-chat-container .widget-container,
                #n8n-chat-container .chat-widget {
                    position: relative !important;
                    transform: none !important;
                    left: auto !important;
                    right: auto !important;
                    top: auto !important;
                    bottom: auto !important;
                }

                /* Estilos adicionales para forzar alineaci√≥n correcta */
                #n8n-chat-container iframe {
                    width: 100% !important;
                    height: 100% !important;
                    border: none !important;
                }

                /* Evitar problemas con z-index */
                #n8n-chat-container * {
                    z-index: unset !important;
                }

                /* Asegurar que el contenido no se salga del contenedor */
                #n8n-chat-container,
                #n8n-chat-container * {
                    max-width: 100% !important;
                    max-height: 100% !important;
                }

                /* Estilos para mensajes de carga centrados */
                #n8n-chat-container .loading-message {
                    display: flex !important;
                    justify-content: center !important;
                    align-items: center !important;
                    height: 100% !important;
                    width: 100% !important;
                    text-align: center !important;
                    position: absolute !important;
                    top: 0 !important;
                    left: 0 !important;
                }

                /* Estilos adicionales para garantizar ocupaci√≥n completa del espacio */
                #n8n-chat-container .n8n-chat-embedded,
                #n8n-chat-container .embedded-chat,
                #n8n-chat-container .chat-embedded {
                    height: 100% !important;
                    width: 100% !important;
                    display: flex !important;
                    flex-direction: column !important;
                    flex: 1 !important;
                }

                /* Forzar que el contenido principal ocupe todo el espacio */
                #n8n-chat-container > div:first-child,
                #n8n-chat-container > div:only-child {
                    height: 100% !important;
                    width: 100% !important;
                    display: flex !important;
                    flex-direction: column !important;
                    flex: 1 !important;
                }

                /* Remover cualquier gap o spacing que pueda estar causando el problema */
                #n8n-chat-container,
                #n8n-chat-container * {
                    gap: 0 !important;
                    row-gap: 0 !important;
                    column-gap: 0 !important;
                }

                /* Asegurar que no haya margins o paddings inesperados */
                #n8n-chat-container > *:first-child {
                    margin-top: 0 !important;
                }

                #n8n-chat-container > *:last-child {
                    margin-bottom: 0 !important;
                }

                /* Animaciones suaves para el chat flotante */
                @keyframes slideInUp {
                    from {
                        transform: translateY(20px);
                        opacity: 0;
                    }
                    to {
                        transform: translateY(0);
                        opacity: 1;
                    }
                }

                @keyframes slideDown {
                    from {
                        height: 480px;
                    }
                    to {
                        height: 60px;
                    }
                }

                /* Estilos b√°sicos para el chat flotante */
                .chat-flotante {
                    position: fixed;
                    bottom: 20px;
                    right: 20px;
                    width: 320px;
                    height: 480px;
                    background: white;
                    border-radius: 15px;
                    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
                    z-index: 1000;
                    overflow: hidden;
                    border: 2px solid #9c27b0;
                }

                .chat-flotante.minimizado {
                    height: 60px;
                }

                .chat-flotante-header {
                    background: linear-gradient(135deg, #9c27b0, #7b1fa2);
                    color: white;
                    padding: 15px 20px;
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    cursor: move;
                    user-select: none;
                }

                .chat-flotante-body {
                    height: calc(100% - 60px);
                    padding: 0;
                    overflow: hidden;
                    background: white;
                }

                .chat-control-btn {
                    background: rgba(255, 255, 255, 0.2);
                    border: none;
                    color: white;
                    width: 25px;
                    height: 25px;
                    border-radius: 50%;
                    cursor: pointer;
                    font-size: 16px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                }

                .chat-control-btn:hover {
                    background: rgba(255, 255, 255, 0.3);
                }

                /* Icono flotante */
                .chat-floating-icon {
                    position: fixed !important;
                    bottom: 30px !important;
                    right: 30px !important;
                    width: 60px !important;
                    height: 60px !important;
                    background: linear-gradient(135deg, #9c27b0, #7b1fa2) !important;
                    border-radius: 50% !important;
                    cursor: pointer !important;
                    z-index: 9999 !important;
                    box-shadow: 0 4px 20px rgba(156, 39, 176, 0.4) !important;
                    display: flex !important;
                    align-items: center !important;
                    justify-content: center !important;
                    visibility: visible !important;
                    opacity: 1 !important;
                    transition: all 0.3s ease !important;
                }

                .chat-floating-icon:hover {
                    transform: scale(1.1) !important;
                    box-shadow: 0 6px 25px rgba(156, 39, 176, 0.6) !important;
                }

                .chat-icon-logo {
                    width: 40px !important;
                    height: 40px !important;
                    border-radius: 50% !important;
                    object-fit: cover !important;
                    border: 2px solid white !important;
                }

                .chat-floating-icon.hidden {
                    display: none !important;
                }

                /* Asegurar que el icono flotante est√© siempre visible */
                #chat-floating-icon {
                    position: fixed !important;
                    bottom: 30px !important;
                    right: 30px !important;
                    z-index: 99999 !important;
                    display: flex !important;
                    visibility: visible !important;
                    opacity: 1 !important;
                    pointer-events: all !important;
                }

                /* Animaci√≥n para el icono flotante */
                @keyframes float {
                    0%, 100% { transform: translateY(0px); }
                    50% { transform: translateY(-10px); }
                }

                .chat-floating-icon {
                    animation: float 3s ease-in-out infinite !important;
                }

                .chat-floating-icon:hover {
                    animation: none !important;
                }

                /* Estilos para botones del chat */
                .btn-empathy {
                    transition: all 0.3s ease;
                    font-family: 'Quicksand', sans-serif;
                    font-weight: 600;
                    letter-spacing: 0.5px;
                    border: none;
                    border-radius: 25px;
                    padding: 12px 25px;
                    cursor: pointer;
                    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
                    color: white;
                }

                .btn-empathy:hover {
                    transform: translateY(-2px);
                    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
                }

                .btn-empathy:active {
                    transform: translateY(0);
                }

                .btn-empathy:disabled {
                    opacity: 0.7;
                    cursor: not-allowed;
                    transform: none;
                }
            </style>
        `;

        // Insertar estilos adicionales
        document.head.insertAdjacentHTML('beforeend', additionalStyles);

        // ===== SISTEMA DE CHATBOT FLOTANTE RESTAURADO =====
        let chatbotInicializado = false;
        let chatMinimizado = false;

        // Funci√≥n para inicializar el chatbot flotante usando el c√≥digo proporcionado
        function inicializarChatbotFlotante() {
            if (chatbotInicializado) return;
            
            console.log('ü§ñ Inicializando chatbot Violet...');
            
            const container = document.getElementById('n8n-chat-container');
            container.innerHTML = '<div style="padding: 20px; text-align: center; color: #5D3FD3; font-family: Arial, sans-serif;"><div style="margin-bottom: 10px;">üíú</div><div>Violet se est√° preparando para ti...</div></div>';
            
            // Cargar CSS del chatbot
            const linkCSS = document.createElement('link');
            linkCSS.href = 'https://cdn.jsdelivr.net/npm/@n8n/chat/dist/style.css';
            linkCSS.rel = 'stylesheet';
            document.head.appendChild(linkCSS);
            
            // Cargar e inicializar el chatbot
            setTimeout(() => {
                import('https://cdn.jsdelivr.net/npm/@n8n/chat/dist/chat.bundle.es.js')
                    .then(({ createChat }) => {
                        container.innerHTML = '';
                        
                        createChat({
                            webhookUrl: 'https://karenospi.app.n8n.cloud/webhook/d922a1f4-8307-4ca7-9f6e-1a600c7f0a64/chat',
                            webhookConfig: {
                                method: 'POST',
                                headers: {}
                            },
                            target: '#n8n-chat-container',
                            mode: 'embedded',
                            chatInputKey: 'chatInput',
                            chatSessionKey: 'sessionId',
                            loadPreviousSession: true,
                            metadata: {},
                            showWelcomeScreen: false,
                            defaultLanguage: 'es',
                            initialMessages: [
                                'Hola! üëã',
                                'Soy ùëΩùíäùíêùíçùíÜùíï. ¬øQuieres contarme c√≥mo te sientes hoy?'
                            ],
                            i18n: {
                                es: {
                                    title: 'Empathy - Chat de Apoyo',
                                    subtitle: 'Bienvenid@ a tu espacio seguro üíú',
                                    footer: '',
                                    getStarted: 'Nueva conversaci√≥n',
                                    inputPlaceholder: 'Mensaje...',
                                }
                            }
                        });
                        
                        console.log('‚úÖ Chatbot Violet inicializado correctamente');
                        chatbotInicializado = true;
                        
                    }).catch(error => {
                        console.error('‚ùå Error al inicializar Violet:', error);
                        container.innerHTML = '<div style="padding: 20px; text-align: center; color: #ff6b6b; font-family: Arial, sans-serif;"><div style="margin-bottom: 10px;">‚ö†Ô∏è</div><div>Error al conectar con Violet</div><div style="margin-top: 10px;"><button onclick="location.reload()" style="background: #5D3FD3; color: white; border: none; padding: 10px 20px; border-radius: 25px; cursor: pointer;">Reintentar</button></div></div>';
                    });
            }, 500);
        }

        // Funci√≥n para abrir la ventana flotante
        function abrirChatFlotante() {
            const chatFlotante = document.getElementById('chat-flotante');
            const iconoFlotante = document.getElementById('chat-floating-icon');
            
            chatFlotante.style.display = 'block';
            
            // Ocultar el icono flotante cuando el chat est√© abierto
            if (iconoFlotante) {
                iconoFlotante.style.display = 'none';
            }
            
            // Restaurar tama√±o si estaba minimizado
            if (chatMinimizado) {
                chatFlotante.classList.remove('minimizado');
                chatMinimizado = false;
            }
            
            // Inicializar chatbot si no est√° inicializado
            if (!chatbotInicializado) {
                inicializarChatbotFlotante();
            }
        }

        // Funci√≥n para cerrar la ventana flotante
        function cerrarChatFlotante() {
            const chatFlotante = document.getElementById('chat-flotante');
            const iconoFlotante = document.getElementById('chat-floating-icon');
            
            if (chatFlotante) {
                chatFlotante.style.display = 'none';
            }
            
            // Restaurar estado no minimizado
            if (chatMinimizado) {
                chatFlotante.classList.remove('minimizado');
                chatMinimizado = false;
            }
            
            // Mostrar el icono flotante cuando el chat se cierre
            if (iconoFlotante) {
                iconoFlotante.style.display = 'flex';
            }
        }

        // Funci√≥n para minimizar la ventana flotante
        function minimizarChatFlotante() {
            const chatFlotante = document.getElementById('chat-flotante');
            const minimizarBtn = document.getElementById('minimizar-chat');
            
            if (chatMinimizado) {
                // Restaurar
                chatFlotante.classList.remove('minimizado');
                minimizarBtn.textContent = '‚àí';
                minimizarBtn.title = 'Minimizar';
                chatMinimizado = false;
            } else {
                // Minimizar
                chatFlotante.classList.add('minimizado');
                minimizarBtn.textContent = '‚ñ°';
                minimizarBtn.title = 'Restaurar';
                chatMinimizado = true;
            }
        }

        // Funci√≥n para actualizar el estado del horario de atenci√≥n
        function actualizarEstadoHorario() {
            const ahora = new Date();
            const hora = ahora.getHours();
            
            // Horario: Lunes a domingo, 08:00 AM - 08:00 PM
            const enHorario = hora >= 8 && hora < 20;
            
            const statusIndicator = document.querySelector('.chat-status-indicator');
            if (statusIndicator) {
                if (enHorario) {
                    statusIndicator.style.backgroundColor = '#4CAF50';
                    statusIndicator.title = 'Violet est√° disponible (08:00 AM - 08:00 PM)';
                } else {
                    statusIndicator.style.backgroundColor = '#FF9800';
                    statusIndicator.title = 'Violet responder√° pronto (Horario: 08:00 AM - 08:00 PM)';
                }
            }
        }

        // Configurar eventos cuando se carga el DOM
        document.addEventListener('DOMContentLoaded', function() {
            // Configurar eventos del chat
            const cerrarBtn = document.getElementById('cerrar-chat-flotante');
            if (cerrarBtn) {
                cerrarBtn.addEventListener('click', cerrarChatFlotante);
            }
            
            const minimizarBtn = document.getElementById('minimizar-chat');
            if (minimizarBtn) {
                minimizarBtn.addEventListener('click', minimizarChatFlotante);
            }
            
            // Actualizar estado del horario
            actualizarEstadoHorario();
            
            // Actualizar cada minuto
            setInterval(actualizarEstadoHorario, 60000);
        });

        // Exponer funciones al scope global
        window.abrirChatFlotante = abrirChatFlotante;

        // Funci√≥n para ajustar estilos del chatbot despu√©s de cargar
        function ajustarEstilosChatbot() {
            try {
                console.log('üé® Ajustando estilos del chatbot...');
                
                const container = document.getElementById('n8n-chat-container');
                if (!container) {
                    console.warn('‚ö†Ô∏è Contenedor n8n no encontrado');
                    return;
                }
                
                // Aplicar estilos al contenedor principal de forma m√°s agresiva
                container.style.cssText = `
                    height: 100% !important;
                    width: 100% !important;
                    display: flex !important;
                    flex-direction: column !important;
                    background: white !important;
                    overflow: hidden !important;
                    border-radius: 0 !important;
                    box-shadow: none !important;
                    position: absolute !important;
                    top: 0 !important;
                    left: 0 !important;
                    right: 0 !important;
                    bottom: 0 !important;
                    padding: 0 !important;
                    margin: 0 !important;
                    border: none !important;
                `;
                
                // Funci√≥n para aplicar estilos recursivamente a todos los elementos
                function aplicarEstilosRecursivo(elemento, nivel = 0) {
                    if (nivel > 10) return; // Prevenir recursi√≥n infinita
                    
                    const hijos = elemento.children;
                    for (let i = 0; i < hijos.length; i++) {
                        const hijo = hijos[i];
                        
                        // Aplicar estilos base a todos los elementos
                        hijo.style.boxSizing = 'border-box';
                        hijo.style.maxWidth = '100%';
                        
                        // Identificar y aplicar estilos espec√≠ficos seg√∫n el tipo de elemento
                        const classList = hijo.className;
                        const testId = hijo.getAttribute('data-testid');
                        
                        // Contenedor principal del chat
                        if (
                            classList.includes('chat-container') ||
                            classList.includes('n8n-chat') ||
                            classList.includes('n8n-chat-widget') ||
                            classList.includes('widget-container') ||
                            testId === 'chat-container' ||
                            nivel === 0
                        ) {
                            hijo.style.cssText = `
                                height: 100% !important;
                                width: 100% !important;
                                display: flex !important;
                                flex-direction: column !important;
                                background: white !important;
                                border-radius: 0 !important;
                                box-shadow: none !important;
                                border: none !important;
                                padding: 0 !important;
                                margin: 0 !important;
                                position: relative !important;
                                overflow: hidden !important;
                            `;
                        }
                        
                        // Header del chat
                        if (
                            classList.includes('chat-header') ||
                            testId === 'chat-header'
                        ) {
                            hijo.style.cssText = `
                                flex-shrink: 0 !important;
                                background: transparent !important;
                                border-bottom: 1px solid #e0e0e0 !important;
                                padding: 10px 15px !important;
                                height: auto !important;
                                min-height: 50px !important;
                            `;
                        }
                        
                        // √Årea de mensajes
                        if (
                            classList.includes('chat-messages') ||
                            classList.includes('messages-container') ||
                            classList.includes('conversation') ||
                            testId === 'chat-messages'
                        ) {
                            hijo.style.cssText = `
                                flex: 1 !important;
                                overflow-y: auto !important;
                                padding: 10px 15px !important;
                                background: white !important;
                                height: auto !important;
                                min-height: 0 !important;
                            `;
                        }
                        
                        // Input del chat
                        if (
                            classList.includes('chat-input') ||
                            classList.includes('input-container') ||
                            classList.includes('message-input') ||
                            testId === 'chat-input'
                        ) {
                            hijo.style.cssText = `
                                flex-shrink: 0 !important;
                                padding: 10px 15px !important;
                                background: white !important;
                                border-top: 1px solid #e0e0e0 !important;
                                height: auto !important;
                                min-height: 60px !important;
                            `;
                        }
                        
                        // Remover posicionamiento problem√°tico
                        if (hijo.style.position === 'absolute' || hijo.style.position === 'fixed') {
                            if (!classList.includes('n8n-chat-container')) {
                                hijo.style.position = 'relative';
                            }
                        }
                        
                        // Aplicar recursivamente a los hijos
                        aplicarEstilosRecursivo(hijo, nivel + 1);
                    }
                }
                
                // Aplicar estilos recursivamente
                aplicarEstilosRecursivo(container);
                
                // Verificar y corregir iframes
                const iframes = container.querySelectorAll('iframe');
                iframes.forEach(iframe => {
                    iframe.style.cssText = `
                        width: 100% !important;
                        height: 100% !important;
                        border: none !important;
                        position: absolute !important;
                        top: 0 !important;
                        left: 0 !important;
                    `;
                });
                
                console.log('‚úÖ Estilos del chatbot ajustados agresivamente');
                
            } catch (error) {
                console.error('‚ùå Error al ajustar estilos:', error);
            }
        }

        // Funci√≥n para inicializar el chatbot flotante
        function inicializarChatbotFlotante() {
            if (chatbotInicializado) return;

            try {
                console.log('ü§ñ Inicializando chatbot...');
                
                const container = document.getElementById('n8n-chat-container');
                container.innerHTML = '<div style="padding: 20px; text-align: center; color: #5D3FD3; font-family: Arial, sans-serif;"><div style="margin-bottom: 10px;">üíú</div><div>Violet se est√° preparando para ti...</div></div>';
                
                // Cargar CSS
                const linkCSS = document.createElement('link');
                linkCSS.href = 'https://cdn.jsdelivr.net/npm/@n8n/chat/dist/style.css';
                linkCSS.rel = 'stylesheet';
                document.head.appendChild(linkCSS);
                
                // Cargar script
                setTimeout(() => {
                    import('https://cdn.jsdelivr.net/npm/@n8n/chat/dist/chat.bundle.es.js')
                        .then(({ createChat }) => {
                            container.innerHTML = '';
                            
                            createChat({
                                webhookUrl: 'https://karenospi.app.n8n.cloud/webhook/d922a1f4-8307-4ca7-9f6e-1a600c7f0a64/chat',
                                webhookConfig: {
                                    method: 'POST',
                                    headers: {}
                                },
                                target: '#n8n-chat-container',
                                mode: 'embedded',
                                chatInputKey: 'chatInput',
                                chatSessionKey: 'sessionId',
                                loadPreviousSession: true,
                                metadata: {},
                                showWelcomeScreen: false,
                                defaultLanguage: 'es',
                                initialMessages: [
                                    'Hola! üëã',
                                    'Soy ùëΩùíäùíêùíçùíÜùíï. ¬øQuieres contarme c√≥mo te sientes hoy?'
                                ],
                                i18n: {
                                    es: {
                                        title: 'Empathy - Apoyo Emocional',
                                        subtitle: 'Bienvenid@ a tu espacio seguro üíú',
                                        footer: 'Horario: Lunes a domingo, 08:00 AM - 08:00 PM',
                                        getStarted: 'Nueva conversaci√≥n',
                                        inputPlaceholder: 'Cu√©ntame c√≥mo te sientes...',
                                        chatPlaceholder: 'Escribe tu mensaje aqu√≠...',
                                        welcome: {
                                            title: 'Hola! Soy Violet üíú',
                                            subtitle: 'Tu compa√±era de apoyo emocional'
                                        }
                                    }
                                }
                            });
                            
                            // Aplicar estilos adicionales despu√©s de cargar
                            setTimeout(() => {
                                ajustarEstilosChatbot();
                                
                                // Observar cambios en el DOM del chatbot con m√°s frecuencia
                                const observer = new MutationObserver((mutations) => {
                                    let needsUpdate = false;
                                    
                                    mutations.forEach((mutation) => {
                                        if (mutation.type === 'childList' || 
                                            mutation.type === 'attributes' ||
                                            mutation.type === 'characterData') {
                                            needsUpdate = true;
                                        }
                                    });
                                    
                                    if (needsUpdate) {
                                        // Aplicar estilos inmediatamente y despu√©s de un peque√±o delay
                                        ajustarEstilosChatbot();
                                        setTimeout(() => {
                                            ajustarEstilosChatbot();
                                        }, 50);
                                    }
                                });
                                
                                // Configurar el observer para ser m√°s sensible
                                observer.observe(container, {
                                    childList: true,
                                    subtree: true,
                                    attributes: true,
                                    attributeFilter: ['style', 'class', 'data-testid'],
                                    characterData: true
                                });
                                
                                // Aplicar estilos adicionales cada segundo durante los primeros 10 segundos
                                let intervals = 0;
                                const intervalId = setInterval(() => {
                                    ajustarEstilosChatbot();
                                    intervals++;
                                    
                                    if (intervals >= 10) {
                                        clearInterval(intervalId);
                                    }
                                }, 1000);
                                
                                console.log('üëÄ Observer agresivo configurado para mantener estilos');
                            }, 300);
                            
                            // Aplicar estilos adicionales despu√©s de m√°s tiempo
                            setTimeout(() => {
                                ajustarEstilosChatbot();
                                forzarAlineacionCompleta();
                            }, 1000);
                            
                            setTimeout(() => {
                                ajustarEstilosChatbot();
                                forzarAlineacionCompleta();
                            }, 2000);
                            
                            setTimeout(() => {
                                forzarAlineacionCompleta();
                            }, 3000);
                            
                            chatbotInicializado = true;
                            console.log('‚úÖ Chatbot inicializado');
                        })
                        .catch(error => {
                            console.error('‚ùå Error:', error);
                            container.innerHTML = '<div style="padding: 20px; text-align: center; color: #5D3FD3; font-family: Arial, sans-serif;"><div style="margin-bottom: 10px;">üíú</div><div>Violet no pudo conectarse. Por favor, intenta m√°s tarde.</div><div style="margin-top: 10px; font-size: 12px; color: #666;">Si necesitas ayuda inmediata, contacta: WhatsApp 35081676**</div></div>';
                        });
                }, 1000);
                
            } catch (error) {
                console.error('‚ùå Error al inicializar:', error);
            }
        }

        // Funci√≥n para verificar y mantener alineaci√≥n correcta
        function verificarAlineacionChatbot() {
            const container = document.getElementById('n8n-chat-container');
            const chatBody = document.querySelector('.chat-flotante-body');
            
            if (!container || !chatBody) return;
            
            // Verificar que el contenedor tenga las dimensiones correctas
            const bodyRect = chatBody.getBoundingClientRect();
            const containerRect = container.getBoundingClientRect();
            
            // Si el contenedor no ocupa todo el espacio disponible, corregir
            if (containerRect.height !== bodyRect.height || containerRect.width !== bodyRect.width) {
                console.log('üîß Corrigiendo alineaci√≥n del chatbot...');
                ajustarEstilosChatbot();
            }
        }

        // Funci√≥n para forzar alineaci√≥n completa del chatbot
        function forzarAlineacionCompleta() {
            const container = document.getElementById('n8n-chat-container');
            if (!container) return;
            
            // Aplicar estilos de posicionamiento absoluto para forzar ocupaci√≥n completa
            container.style.position = 'absolute';
            container.style.top = '0';
            container.style.left = '0';
            container.style.right = '0';
            container.style.bottom = '0';
            container.style.width = '100%';
            container.style.height = '100%';
            
            // Buscar y ajustar el primer hijo del contenedor
            const primerHijo = container.firstElementChild;
            if (primerHijo) {
                primerHijo.style.cssText = `
                    height: 100% !important;
                    width: 100% !important;
                    display: flex !important;
                    flex-direction: column !important;
                    flex: 1 !important;
                    position: relative !important;
                    background: white !important;
                    border-radius: 0 !important;
                    box-shadow: none !important;
                    border: none !important;
                    padding: 0 !important;
                    margin: 0 !important;
                `;
            }
            
            // Aplicar estilos recursivamente
            ajustarEstilosChatbot();
            
            console.log('üîß Alineaci√≥n completa forzada');
        }

        // Funci√≥n para abrir la ventana flotante
        function abrirChatFlotante() {
            const chatFlotante = document.getElementById('chat-flotante');
            const iconoFlotante = document.getElementById('chat-floating-icon');
            
            chatFlotante.style.display = 'block';
            
            // Ocultar el icono flotante cuando el chat est√© abierto
            if (iconoFlotante) {
                iconoFlotante.style.display = 'none';
            }
            
            // Inicializar chatbot si no est√° inicializado
            if (!chatbotInicializado) {
                inicializarChatbotFlotante();
            } else {
                // Si ya est√° inicializado, forzar alineaci√≥n completa
                setTimeout(() => {
                    forzarAlineacionCompleta();
                }, 100);
                
                setTimeout(() => {
                    verificarAlineacionChatbot();
                }, 500);
            }
        }

        // Funci√≥n para cerrar la ventana flotante
        function cerrarChatFlotante() {
            const chatFlotante = document.getElementById('chat-flotante');
            const iconoFlotante = document.getElementById('chat-floating-icon');
            
            if (chatFlotante) {
                chatFlotante.style.display = 'none';
            }
            
            // Mostrar el icono flotante cuando el chat se cierre
            if (iconoFlotante) {
                iconoFlotante.style.display = 'flex';
            }
        }

        // Funci√≥n para reiniciar el chat
        function reiniciarChatFlotante() {
            chatbotInicializado = false;
            const container = document.getElementById('n8n-chat-container');
            container.innerHTML = '<div style="padding: 20px; text-align: center; color: #5D3FD3; font-family: Arial, sans-serif;"><div style="margin-bottom: 10px;">üíú</div><div>Reiniciando conversaci√≥n con Violet...</div></div>';
            
            // Aplicar estilos al contenedor durante el reinicio
            container.style.cssText = `
                height: 100% !important;
                width: 100% !important;
                display: flex !important;
                flex-direction: column !important;
                background: white !important;
                overflow: hidden !important;
                border-radius: 0 !important;
                box-shadow: none !important;
                justify-content: center !important;
                align-items: center !important;
            `;
            
            setTimeout(() => {
                inicializarChatbotFlotante();
            }, 1000);
        }

        // Configurar eventos cuando se carga el DOM
        document.addEventListener('DOMContentLoaded', function() {
            // Funci√≥n para asegurar que el icono flotante est√© visible
            function asegurarIconoFlotanteVisible() {
                const iconoFlotante = document.getElementById('chat-floating-icon');
                if (iconoFlotante) {
                    // Asegurar que el icono est√© visible
                    iconoFlotante.style.cssText = `
                        position: fixed !important;
                        bottom: 30px !important;
                        right: 30px !important;
                        width: 60px !important;
                        height: 60px !important;
                        background: linear-gradient(135deg, #9c27b0, #7b1fa2) !important;
                        border-radius: 50% !important;
                        cursor: pointer !important;
                        z-index: 9999 !important;
                        box-shadow: 0 4px 20px rgba(156, 39, 176, 0.4) !important;
                        display: flex !important;
                        align-items: center !important;
                        justify-content: center !important;
                        visibility: visible !important;
                        opacity: 1 !important;
                        transition: all 0.3s ease !important;
                    `;
                    
                    // Asegurar que la imagen est√© visible
                    const logo = iconoFlotante.querySelector('.chat-icon-logo');
                    if (logo) {
                        logo.style.cssText = `
                            width: 40px !important;
                            height: 40px !important;
                            border-radius: 50% !important;
                            object-fit: cover !important;
                            border: 2px solid white !important;
                        `;
                    }
                    
                    console.log('‚úÖ Icono flotante asegurado como visible');
                } else {
                    console.error('‚ùå No se encontr√≥ el icono flotante');
                }
            }
            
            // Asegurar visibilidad del icono inmediatamente
            asegurarIconoFlotanteVisible();
            
            // Verificar peri√≥dicamente que el icono est√© visible
            setInterval(asegurarIconoFlotanteVisible, 2000);
            
            // Funci√≥n para actualizar el estado del horario de atenci√≥n
            function actualizarEstadoHorario() {
                const ahora = new Date();
                const hora = ahora.getHours();
                const dia = ahora.getDay(); // 0 = domingo, 6 = s√°bado
                
                // Horario: Lunes a domingo, 08:00 AM - 08:00 PM
                const enHorario = hora >= 8 && hora < 20;
                
                const statusIndicator = document.querySelector('.chat-status-indicator');
                if (statusIndicator) {
                    if (enHorario) {
                        statusIndicator.style.backgroundColor = '#4CAF50';
                        statusIndicator.title = 'Violet est√° disponible (08:00 AM - 08:00 PM)';
                    } else {
                        statusIndicator.style.backgroundColor = '#FF9800';
                        statusIndicator.title = 'Violet responder√° pronto (Horario: 08:00 AM - 08:00 PM)';
                    }
                }
            }
            
            // Actualizar estado inmediatamente y cada minuto
            actualizarEstadoHorario();
            setInterval(actualizarEstadoHorario, 60000);
            
            const cerrarChatBtn = document.getElementById('cerrar-chat-flotante');
            const minimizarChatBtn = document.getElementById('minimizar-chat');

            // Evento para cerrar chat flotante
            if (cerrarChatBtn) {
                cerrarChatBtn.addEventListener('click', function() {
                    cerrarChatFlotante();
                });
            }

            // Evento para minimizar chat
            if (minimizarChatBtn) {
                minimizarChatBtn.addEventListener('click', function() {
                    const chatFlotante = document.getElementById('chat-flotante');
                    const iconoFlotante = document.getElementById('chat-floating-icon');
                    
                    chatFlotante.classList.toggle('minimizado');
                    
                    // Si se minimiza, mostrar el icono flotante
                    if (chatFlotante.classList.contains('minimizado')) {
                        if (iconoFlotante) {
                            iconoFlotante.style.display = 'flex';
                        }
                    } else {
                        // Si se restaura, ocultar el icono flotante
                        if (iconoFlotante) {
                            iconoFlotante.style.display = 'none';
                        }
                    }
                });
            }

            // Evento para el icono flotante
            const iconoFlotante = document.getElementById('chat-floating-icon');
            if (iconoFlotante) {
                iconoFlotante.addEventListener('click', function() {
                    abrirChatFlotante();
                });
                
                // Asegurar que el icono est√© visible al cargar
                iconoFlotante.style.display = 'flex';
                console.log('‚úÖ Icono flotante configurado y visible');
            }
        });

        // Funciones globales
        window.abrirChatFlotante = abrirChatFlotante;
        window.cerrarChatFlotante = cerrarChatFlotante;
        window.reiniciarChatFlotante = reiniciarChatFlotante;

        console.log('ü§ñ Sistema de chatbot configurado');
        
        // Script final para asegurar que el icono flotante est√© visible
        setTimeout(() => {
            const iconoFlotante = document.getElementById('chat-floating-icon');
            if (iconoFlotante) {
                iconoFlotante.style.display = 'flex';
                iconoFlotante.style.visibility = 'visible';
                iconoFlotante.style.opacity = '1';
                iconoFlotante.style.zIndex = '99999';
                console.log('üéØ Icono flotante forzado a visible');
            }
        }, 1000);
    </script>

</body>
</html>
